version: "3.9"

services:
  grafana-sync:
    build: ..
    container_name: grafana-sync
    restart: unless-stopped
    environment:
      LISTEN_ADDR: ":8080"
      DATA_DIR: "/data"
      SYNC_INTERVAL: "15m"
      DEFAULT_USER_ROLE: "Viewer"
      ALLOW_CREATE_USERS: "true"
      ALLOW_REMOVE_TEAM_MEMBERS: "true"
      GRAFANA_URL: "http://grafana:3000"
      GRAFANA_ADMIN_USER: "admin"
      GRAFANA_ADMIN_PASSWORD: "changeme"
      # GRAFANA_ADMIN_TOKEN: ""
      ENTRA_TENANT_ID: "your-tenant-id"
      ENTRA_CLIENT_ID: "your-client-id"
      ENTRA_CLIENT_SECRET: "your-client-secret"
    ports:
      - "8085:8080"
    volumes:
      - grafana-sync-data:/data
    networks:
      - grafana

volumes:
  grafana-sync-data:

networks:
  grafana:
    external: true
